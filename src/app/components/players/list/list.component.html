<div class="container">
  <div id="jugadores" class="container">
    <div class="container">

      <!-- Componente de búsqueda y filtros -->
      <app-search
        (searchEvent)="searchTerm = $event"
        (filterEvent)="filterBy = $event">
      </app-search>

      <button class="btn btn-primary ms-2" (click)="abrirFormulario()">
        ➕ Añadir jugador
      </button>

      <!-- Modal de formulario -->
      <div *ngIf="mostrarFormulario" class="modal-overlay">
        <div class="modal-content">
          <app-add-player-form
            (formCancel)="cerrarFormulario()"
            (playerAdded)="cerrarFormulario()">
          </app-add-player-form>
          <button class="close-btn" (click)="cerrarFormulario()">✖</button>
        </div>
      </div>







      <!-- Comprobamos si ya llegaron los jugadores desde Firebase -->
      <ng-container *ngIf="players$ | async as playersList">

        <!-- Jugadores con estilo flip-card -->
        <div class="players-grid">
          <!-- Bucle que incluye la tarjeta y el botón -->
          <div *ngFor="let player of playersList
                      | playerFilter:searchTerm:(filterBy?.position || ''):(filterBy?.height || ''):(filterBy?.weight || ''):(filterBy?.age || ''):(filterBy?.ppg || ''):(filterBy?.rpg || ''):(filterBy?.apg || '')"
              class="player-wrapper">

            <!-- Tarjeta -->
            <app-flip-card [player]="player">
            </app-flip-card>


          </div>
        </div>

      </ng-container>
