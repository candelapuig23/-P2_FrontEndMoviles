<div class="container">
  <div id="jugadores" class="container">
    <div class="container">

      <!-- Componente de búsqueda y filtros -->
      <app-search (searchEvent)="searchTerm = $event" (filterEvent)="filterBy = $event">
      </app-search>

      <!-- Comprobamos si ya llegaron los jugadores desde Firebase -->
      <ng-container *ngIf="players$ | async as playersList">

        <!-- Jugadores con estilo flip-card -->
        <div class="players-grid">
          <!-- Bucle que incluye la tarjeta y los botones -->
          <div
            *ngFor="let player of playersList
                      | playerFilter:searchTerm:(filterBy?.position || ''):(filterBy?.height || ''):(filterBy?.weight || ''):(filterBy?.age || ''):(filterBy?.ppg || ''):(filterBy?.rpg || ''):(filterBy?.apg || '')"
            class="player-wrapper">

            <!-- Tarjeta del jugador -->
            <app-flip-card [player]="player" (delete)="player.id && firebaseService.deletePlayer(player.id)"

              (edit)="onEditPlayer($event)">
            </app-flip-card>

          </div>
        </div>

        <!-- Formulario de edición de jugador -->
        <app-edit-player-form *ngIf="jugadorParaEditar" [player]="jugadorParaEditar" (playerUpdated)="onPlayerUpdated()"
          (cancelEdit)="jugadorParaEditar = null">
        </app-edit-player-form>

      </ng-container>

    </div>
  </div>
</div>